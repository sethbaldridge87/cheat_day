<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="stylesheet" type="text/css" href="style/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="style/style.css">
    <link rel="stylesheet" type="text/css" href="slick/slick.css">
    <link rel="stylesheet" type="text/css" href="slick/slick-theme.css">
	<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
	<script type="text/javascript" src="slick/slick.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/cheat_day.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Anton|Lato|Lobster|Roboto" rel="stylesheet">
    <title>Project 1</title>
</head>
<body>
<script>
    var deserts = ["cupcakes", "brownies", "cakes", "cookies", "Bundt-cake",  ]
    var queryURL = "https://www.nutritionix.com/search?q=" + deserts + "df832208c5f6294a6c0453e21c518890";

    $.ajax({
        url: queryURL,
        method: "GET"
    })
        // We store all of the retrieved data 
        .then(function (response) {

            // Log the url
            console.log(queryURL);

            // Log the resulting object
            console.log(response);
        })
</script>
</body>
<nav class="navbar navbar-light navbar-expand-lg">
    <a class="navbar-brand" href="index.html"><img src="images/clear_logo.png" alt="Cheat Day Bakery" id="front_logo"></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
            <a class="nav-item nav-link" href="index.html">Home</a>
            <a class="nav-item nav-link" href="about.html">About Us</a>
            <a class="nav-item nav-link" href="menu.html">Order</a>
            <a class="nav-item nav-link" href="nutrition.html">Nutrition Facts</a>
            <a class="nav-item nav-link" href="FAQ.html">FAQs</a>
            <a class="nav-item nav-link" href="gallery.html">Gallery</a>
            <a class="nav-item nav-link" href="contact.html">Contact Us</a>
        </div>
    </div>
</nav><hr>
<div class="container">
	<div class="row justify-content-center">
		<h1>Calorie Counter</h1>
	</div><br>
	<div class="row">
		<h4>The key to a good Cheat Day is to plan it! How many calories will you need to burn off later after eating one of our tasty creations?</h4>		
	</div>
    <div id="buttons-view"></div>
	<br>
    <div id="buttons"></div>
    <form id="cheatDay">
        <label for="other">Wondering about something else? Try searching for it here!</label><br>
        <input type="text" id="other"><br><br>

        <!-- Button triggers new to be added -->
        <input id="search" type="submit" value="SEARCH">
    </form>
    <script>

        var desserts = ["Cupcakes", "Brownies", "Cakes", "Cookies", "Bundt Cake", "Cream Cheese Frosting", "Chocolate Frosting", "Coconut Frosting", "Peanut Butter Frosting" ];
        var queryURL = "https://api.edamam.com/search?q=" + desserts + "&app_key=f104c4b979a95ae85e141313a0e2cc82&app_id=797b9472";
       
        $(document).ready(function () {
            showButtons();
            // Function for displaying movie data
            function showButtons() {

                // Deleting the movies prior to adding new movies
                // (this is necessary otherwise you will have repeat buttons)
                $("#buttons-view").empty();
                // Looping through the array of foods at cheatday
                for (var i = 0; i < desserts.length; i++) {
                    // Creates  button tag
                    var button = $("<button>");
                    // Adding a class to our arrays buttons
                    button.addClass("array-btn");
                    // Adding a data-attribute
                    button.attr("data-name", desserts[i]);
                    // Providing the initial button text
                    button.text(desserts[i]);
                    // Adding the button to the buttons-view div
                    $("#buttons-view").append(button);

                }
            };
            //console.log(desserts);
            //console.log(queryURL);

            $(document).on("click", "button", function () {
                food = $(this).attr("data-name");
                var queryURL = "https://api.edamam.com/search?q=" + food + "&app_id=797b9472&app_key=f104c4b979a95ae85e141313a0e2cc82&from=0&to=2"

                $.ajax({
                    url: queryURL,
                    method: "GET"
                    // store data
                }).then(function (response) {
                    var firstResult = response.hits[0];
                    var calories = firstResult.recipe.calories;
                    var yield = firstResult.recipe.yield;
                    var serving= Math.round(calories/yield);

                    $("#buttons").html("<div>Calories: " + serving + "</div>")

                    //console.log(serving);
                    //console.log(calories);
                    //console.log(response);
                    //console.log(firstResult);
                   
                });
            });
        });
    </script>	
</div>
<footer class="footer">
	<div class="container-fluid">
		<div class="row">
			<div class="col">
				<ul>
					<a href="index.html"><li>Home</li></a>
					<a href="about.html"><li>About Us</li></a>
					<a href="menu.html"><li>Order</li></a>
					<a href="nutrition.html"><li>Nutrition</li></a>
				</ul>
			</div>
			<div class="col">
				<ul>
					<a href="FAQ.html"><li>FAQs</li></a>
					<a href="gallery.html"><li>Gallery</li></a>
					<a href="contact.html"><li>Contact Us</li></a>
				</ul>
			</div>
			<div class="col">
				<img src="images/logo.jpg" alt="Cheat Day Logo">
				<span class="text-muted">Copyright Cheat Day 2018</span>
			</div>
		</div>
	</div>
</footer>
</html>